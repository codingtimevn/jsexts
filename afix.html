<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mobile-detect/1.3.3/mobile-detect.min.js"></script>
    <script src="watch.js"></script>
    <script src="affix.js"></script>
    <style>
        body {
            padding-top: 100px;
        }
        #tools {
            position: fixed;
            right: 10px;
            top: 10px;
            z-index: 99999;
        }
        #bar {
            height: 45px;
            background: #3c3c3c;
        }

        header {
            background: #808080;
            height: 110px;
        }

        h1 {
            background: #9b8d8d;
            border: 3px solid #0094ff;
            margin: 0;
        }

        .content {
            height: 500px;
        }
        .container>:nth-child(0){
            background:#e6e6e6
        }
        .container>:nth-child(1) {
            background:#ffc4c4
        }
        #contents * {
            padding: 0;
        }
    </style>
    <script>
        function random(min,max)
        {
            return Math.floor(Math.random()*(max-min+1)+min);
        }

        jQuery(function ($) {
            $('h1').each(function (i) {
                $(this).append('   ' + (i + 1))
                .next().css('height',random(100,200));
            });


            var contents = $('#contents'), cols = { 1: 12, 2: 6, 3: 4, 4: 3 };

            $('#selectcolums').change(function () {
                contents.children().attr('class', 'col-md-' + cols[$(this).val()]);
                CodingTime.Affix.reset();
            }).change();
            var toggle = false, header =  $('#bar').click(function () {
                if (toggle) {
                    header.stop().animate({ height: 110 });
                } else {
                    header.stop().animate({ height: 700 });
                }
                toggle = !toggle;
            });


            $.each([
                {
                    selector: 'header',
                    watch: true
                },
                {
                    selector: '.head',
                    push: 'header',
                    hides: [
                        {
                            selector: '.head',
                            space: 10
                        }
                    ]
                },
                {
                    selector: 'h1',
                    space: 10,
                    push: 'h1',
                    hides: [
                        {
                            selector: '.head',
                            space: 10
                        }
                    ]
                }
            ], function () {
                var bg = $.now();
                new CodingTime.Affix(this.selector, this);
                console.log($.now() - bg);
            });
        });
    </script>
</head>
<body>
    <div id="tools">
        <select id="selectcolums">
            <option value="1" selected="selected">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
        </select>
    </div>
    <div id="bar" data-ct-affix='{"watch":true}'>

    </div>
    <header></header>
    <div id="contents" class="container">
        <div class="column1">
            <div class="head navbar bg-primary">Head parent</div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
        </div>
        <div class="column2">
            <div class="head navbar bg-primary ">Head parent</div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
        </div>
        <div class="column3">
            <div class="head navbar bg-primary ">Head parent</div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
        </div>
        <div class="column4">
            <div class="head navbar bg-primary ">Head parent</div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
        </div>
        <div class="column5">
            <div class="head navbar bg-primary ">Head parent</div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
            <div>
                <h1>header</h1>
                <div class="content"></div>
            </div>
        </div>
    </div>
</body>
</html>
